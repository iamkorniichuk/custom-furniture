<div class="relative inline-block" (appClickOutside)="close()">
  <button
    class="inline-flex items-center cursor-pointer"
    type="button"
    (click)="toggleDropdown()"
  >
    <img
      class="w-5 h-auto"
      [src]="selectedLanguage().src"
      [alt]="selectedLanguage().label"
    />
    <span class="w-5 h-auto ml-2 mr-1">{{
      selectedLanguage().code.toUpperCase()
    }}</span>

    <svg
      class="h-6 w-auto"
      [class.rotate-180]="isDropdownOpen()"
      viewBox="0 0 20 20"
      fill="currentColor"
    >
      <path
        fill-rule="evenodd"
        d="M5.23 7.21a.75.75 0 011.06.02L10 10.939l3.71-3.71a.75.75 0 111.06 1.061l-4.24 4.24a.75.75 0 01-1.06 0L5.25 8.27a.75.75 0 01-.02-1.06z"
        clip-rule="evenodd"
      />
    </svg>
  </button>

  @if (isDropdownOpen()) {
    <div class="absolute top-8 w-full left-0 grid gap-2">
      @for (item of availableLanguages; track item.label) {
        @if (item !== selectedLanguage()) {
          <span
            (click)="selectLanguage(item)"
            (keyup.enter)="selectLanguage(item)"
            role="button"
            tabindex="0"
            class="inline-flex items-center cursor-pointer"
          >
            <img class="w-5 h-auto mr-2" [src]="item.src" [alt]="item.label" />
            <span>{{ item.code.toUpperCase() }}</span>
          </span>
        }
      }
    </div>
  }
</div>
